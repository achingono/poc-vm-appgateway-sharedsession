<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.web>
        <compilation debug="true" />
        <customErrors mode="Off" />
        <!-- https://codewithshadman.com/machine-key-generator/ -->
        <machineKey validation="SHA1" 
            decryption="AES" 
            decryptionKey="0CE46E0A839B4D74421B2B4FC083E57015981CA682D9833CFFB2F9575F08E41F" 
            validationKey="B05F53B792A97D418CBCE8499243FC9FC7A67405" />
        <!-- https://learn.microsoft.com/en-us/azure/azure-cache-for-redis/cache-aspnet-session-state-provider#aspnet-session-state-options -->
        <sessionState mode="Custom" customProvider="RedisSessionStateStore">
            <providers>
                <add name="RedisSessionStateStore" type="Microsoft.Web.Redis.RedisSessionStateProvider"
                    host="hostname.redis.cache.windows.net"
                    port="6380"
                    accessKey="access key"
                    ssl="true"
                    applicationName="test"
                    databaseId="0"
                    throwOnError="true"  />
            </providers>
        </sessionState>
    </system.web>
    <system.webServer>
        <httpErrors errorMode="Detailed" />
        <asp appAllowClientDebug="True" appAllowDebugging="True" scriptErrorSentToBrowser="True" enableParentPaths="True">
            <comPlus appServiceFlags="EnableTracker" />
        </asp>
        <!-- https://stackoverflow.com/q/56931949 -->
        <modules>
            <remove name="Session" />
            <add name="Session" type="Microsoft.AspNet.SessionState.SessionStateModuleAsync" preCondition="integratedMode" />
        </modules>
    </system.webServer>
    <runtime>  
        <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">  
           <dependentAssembly>  
              <assemblyIdentity name="System.Runtime.CompilerServices.Unsafe"  
                                publicKeyToken="b03f5f7f11d50a3a"  
                                culture="neutral" />  
              <bindingRedirect oldVersion="0.0.0.0-4.0.4.1"  
                               newVersion="6.0.0.0"/>  
           </dependentAssembly>  
           <dependentAssembly>  
            <assemblyIdentity name="System.IO.Pipelines"  
                              publicKeyToken="cc7b13ffcd2ddd51"  
                              culture="neutral" />  
            <bindingRedirect oldVersion="0.0.0.0-5.0.0.1"  
                             newVersion="6.0.0.2"/>  
         </dependentAssembly>  
      </assemblyBinding>  
     </runtime> 
</configuration>